## 使用蓝图 根路由/home

### 文件说明：
* ./\__init__.py  蓝图设置
* ./accountant_server.py  查询数据库等实现部分
* ./index.py 子路由设置

### 访问网址
47.94.133.35:5500

### 路由 及参数

------------------------------------------------
/accountant/turnover     获取支出/收入流水 （get）
* 参数
> type_info=in    in：收入流水   out： 支出流水
> search=马        搜索内容 对用户名和用户id进行模糊搜索
> page_count
> current_page
* 返回值
> {
  "data": {
    "count": 2,
    "data_list": [
      {
        "nickname": "欢乐马",                           -- 昵称
        "order_id": "WFH59768597202001112347149166",   -- 订单id
        "order_time": null,                            -- 订单生成时间
        "pay_money": null,                             -- 订单金额
        "real_money": 0.01,                            -- 实际金额
        "rebate_money": null,                          -- 返利金额
        "turnover_id": "WHF15788152934204",            -- 流水号
        "type": "购物",                                -- 流水类型
        "user_id": "WFH59768597"                       -- 用户的id
      },
      {
        "nickname": "欢乐马",
        "order_id": "WFH59768597202001112347149166",
        "order_time": null,
        "pay_money": null,
        "real_money": 0.01,
        "rebate_money": null,
        "turnover_id": "WHF15788181424331",
        "type": "购物",
        "user_id": "WFH59768597"
      }
    ]
  },
  "message": "ok"
}

-----------------------------------------------------------
/accountant/delete_turnover     删除流水信息(post)
* 请求体
> {
	"turnover_id":["WFH63115600", "WHF15788152934204"]  -- 流水单号
}
* 返回值
> {
  "data": true,
  "message": "ok"
}
------------------------------------------------------------
/accountant/invoice_info_list        查询发票的列表(get)
* 参数
> is_e_invoice=0   -- 1 电子发票 0 纸质发票
> search=112       -- 搜索内容，可以模糊搜索发票号，用户名称  用户的id
> page_count
> current_page
* 返回值
> {
  "data": {
    "count": 2,
    "data_list": [
      {
        "add_time": "2019-09-15 16:28:08",        -- 申请时间
        "address": "aa@yplsec.cn",                -- 邮箱/地址
        "goods_count": 1,                          -- 商品数量
        "goods_title": "WFH荒野健康乳清蛋白粉考拉系列1磅",   -- 商品tittle
        "invoice_id": 4,                           -- 发票的id
        "invoice_title": "芸品绿",                  -- 发票抬头
        "is_company": 1,                           -- 是否是企业发票
        "nickname": "欢乐马",                       -- 用户昵称
        "order_id": "WFH59768597202001282159386611",  -- 订单id
        "recipient": "aa",                            -- 收件人
        "state": 0,                                  -- 状态 0 为开票  1 已开票
        "tel": "17812341234",                        -- 收件人手机号
        "tin_number": "12121212112122112",           -- 发票号
        "user_id": "WFH59768597"                      -- 用户的id
      },
      {
        "add_time": "2019-09-15 16:26:40",
        "address": "aa@yplsec.cn",
        "goods_count": null,
        "goods_title": null,
        "invoice_id": 3,
        "invoice_title": "芸品绿",
        "is_company": 1,
        "nickname": "****",
        "order_id": "WFH63115600202001281930047909",
        "recipient": "aa",
        "state": 0,
        "tel": "17812341234",
        "tin_number": "12121212112122112",
        "user_id": "WFH63115600"
      }
    ]
  },
  "message": "ok"
}

---------------------------------------------------------------
/accountant/invoice_detail   获取发票的详情信息(get)
* 参数
> invoice_id=5
* 返回值
>{
  "data": {
    "add_time": "2020-01-28 19:30:05",
    "address": "123456789@qq.com",
    "goods_count": 1,
    "invoice_id": 5,
    "invoice_title": "tty",
    "is_company": 0,
    "nickname": "****",
    "order_detail": [                                    --- 订单的详情
      {
        "count": 1,                                     -- 购买数量
        "goods_title": "WFH荒野健康乳清蛋白粉考拉系列1磅",  -- 商品tittle
        "pay_price": 248.0,             -- 支付金额
        "rebate_money": 0.0,            -- 返利金额
        "taste": "奶茶味"                -- 口味
      }
    ],
    "order_id": "WFH63115600202001281930047909",
    "recipient": "陈磊",
    "state": 0,
    "tel": "1234566",
    "tin_number": "",
    "user_id": "WFH63115600"
  },
  "message": "ok"
}

-------------------------------------------
/accountant/update_invoice        --- 更新发票信息 (post)    


* 请求体
> {
	"invoice_id": 5,            -- 发票id
	"express_name": "",         -- 发货的物流 (纸质发票)
	"express_number": "",       -- 发货的单号 (纸质发票)
	"state": 1                  -- 状态 1/开票 
}
* 返回值
>{
  "data": true,
  "message": "ok"
}


---------------------------------------------------
/accountant/delete_invoice    删除发票信息 (post)

* 请求体
>{
	"invoice_id": [2, 3]   发票id
}
* 返回值
>{
  "data": true,
  "message": "ok"
}

----------------------------------------------------------
/accountant/brokerage_turnover_list   返利提取流水列表(get)

* 请求参数
> page_count
> current_page
* 返回值
> {
  "data": {
    "count": 1,
    "data_list": [
      {
        "amount": 1.0,                        -- 提现金额
        "nickname": "****",                   -- 用户的昵称
        "order_id": null,                     -- 没用
        "turnover_id": "WHFcash15819258239683",  -- 流水的id
        "type": "提现",                        -- 类型
        "user_id": "WFH63115600"              -- 用户的id
      }
    ]
  },
  "message": "ok"
}

----------------------------------------------------------
/accountant/cash_withdrawal_list   提现审核列表 (get)

* 请求参数
> page_count
> current_page
* 返回值
> {
  "data": {
    "count": 2,
    "data_list": [
      {
        "add_time": "2020-02-17 00:01:32",     -- 申请时间
        "amount": 1060.0,                      -- 申请的金额
        "cash_id": 4,                          -- id
        "nickname": "****",                    -- 用户昵称
        "state": 0,                            -- 状态 0 未审核 1 通过 2 驳回
        "user_id": WFH63115600                 -- 用户的id
      },
      {
        "add_time": "2020-02-21 23:36:24",
        "amount": 1400.0,
        "cash_id": 5,
        "nickname": "likamoer",
        "user_id": WFH70312768
      }
    ]
  },
  "message": "ok"
}

--------------------------------------------------
/accountant/cash_withdrawal_detail  申请的详情(get)
* 参数
> cash_id=4  申请的id(必传)
> type=代销   类型("代销", "推荐", "活跃")

* 返回值
1. 代销时：
> {
  "data": [
    {
      "active_rebate": 0.0,                  -- 活动返利
      "base_rebate": 0.0,                    -- 基础返利
      "coupon_rebate": 0.0,                  -- 优惠券返利
      "goods_count": 1,                      -- 购买数量
      "goods_title": "WFH荒野健康乳清蛋白粉2磅", -- 商品名称
      "pay_price": 248.0,                     -- 订单金额
      "r_time": "2020-02-03 15:08:05",        -- 日期
      "rebate_money": 0.0                     -- 返利金额
    }
  ],
  "message": "ok"
}
2. 推荐时
> {
  "data": [
    {
      "child_id": "WFH70312768",            -- 推荐的用户id
      "r_time": "2019-12-15 14:56:23",      -- 日期
      "rebate_money": 400.0,                -- 返利金额
      "task_rank": 3                        -- 任务阶段
    },
    {
      "child_id": "WFH70312768",          
      "r_time": "2019-12-15 14:46:25",
      "rebate_money": 650.0,
      "task_rank": 2
    }
  ],
  "message": "ok"
}
3. 活跃时
> {
  "data": [                 -- 每天活跃的具体信息
    {
      "01": 0,               -- 分享积分
      "02": 0,               -- 邀请积分
      "03": 5,               -- 登陆积分
      "04": 100,             -- 代销积分
      "05": 0,               -- 评论积分
      "06": 0,               -- 实名认证积分
      "07": 0,               -- 补偿奖励积分
      "08": 0,               -- 月度销售排行奖积分
      "date": "2020-02-03"
    },
    {
      "01": 0,
      "02": 0,
      "03": 5,
      "04": 0,
      "05": 0,
      "06": 0,
      "07": 0,
      "08": 0,
      "date": "2020-02-02"
    },
    {
      "01": 0,
      "02": 0,
      "03": 5,
      "04": 0,
      "05": 0,
      "06": 0,
      "07": 0,
      "08": 0,
      "date": "2020-02-01"
    },
    {
      "01": 0,
      "02": 0,
      "03": 5,
      "04": 0,
      "05": 0,
      "06": 0,
      "07": 0,
      "08": 0,
      "date": "2020-01-29"
    },
    {
      "01": 0,
      "02": 0,
      "03": 5,
      "04": 0,
      "05": 0,
      "06": 0,
      "07": 0,
      "08": 0,
      "date": "2020-01-28"
    },
    {
      "01": 0,
      "02": 0,
      "03": 5,
      "04": 0,
      "05": 0,
      "06": 0,
      "07": 0,
      "08": 0,
      "date": "2020-01-19"
    }
  ],
  "message": "ok"
}

-------------------------------------------
/accountant/audit_cash_withdrawal   审核审批(get)
* 参数
> cash_id=5   --申请的id
> state=1     -- 1: 通过  2: 驳回
* 返回值
> {
  "data": false,              -- true 成功 false 失败
  "message": "支付失败-真实姓名不一致."     -- 失败的时候可以将信息直接展示
}
